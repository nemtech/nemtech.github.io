
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Node &#8212; Symbol Documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans:400,400i,700&display=swap" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/examplecode.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'Main',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/custom.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/examplecode.js"></script>
    <script type="text/javascript" src="https://unpkg.com/mermaid@7.1.0/dist/mermaid.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Extending Symbol" href="plugin.html" />
    <link rel="prev" title="Namespace" href="namespace.html" />
  
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=5'>
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-174021413-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-174021413-2');
</script>

  
  <link rel="alternate" type="application/atom+xml"  href="../guides/atom.xml" title="Blog">
  
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.postlist a {font-style: italic;}
    ul.postlist-style-disc {list-style-type: disc;}
    ul.postlist-style-none {list-style-type: none;}
    ul.postlist-style-circle {list-style-type: circle;}
  </style>

  </head>
  <body>

<div class="navbar navbar-default gradient navbar-fixed-top"
     id="navbar">
    <div class="container navbar-top hidden-xs hidden-sm">
        <div class="row">
            <div class="col-lg-8 col-md-7">
                <div id="language">
    <label class="select">
        <select>
            <option id="english" value="en">EN</option>
            <option id="japanese" value="ja">JA</option>
            <!--<option id="chinese" value="zh_CN">中文</option>-->
            <option id="translate" value="translate">Translate</option>
        </select>
    </label>
</div>
            </div>
            <div class="col-lg-4 col-md-5">
                
                <div id="search-box">
    <input class="search search-desktop form-control" placeholder="Search"/>
</div>
                
                <ul id="social" class="list-inline">
    <li>
        <a href="https://twitter.com/NEMofficial" rel="nofollow"><i class="fab fa-twitter" title="Twitter"></i></a>
    </li>
    <li>
        <a href="https://discord.com/invite/xymcity" rel="nofollow" title="Discord"><i class="fab fa-discord"></i></a>
    </li>
    <li>
        <a href="https://github.com/symbol/" rel="nofollow" title="GitHub"><i class="fab fa-github"></i></a>
    </li>
</ul>
            </div>
        </div>
    </div>
    <hr/>
    <div class="container navbar-main">
        <div class="row">
            <div class="navbar-header col-lg-6 col-md-4 col-xs-6">
                <a class="navbar-brand" href="../index.html">
                    
                    <span><img alt="NEM logo" src="../_static/logo-symbol.svg"></span>
                    
                </a>
            </div>
            <div class="navbar-right col-lg-6 col-md-8 hidden-xs hidden-sm">
                <ul class="list-inline">
    <li>
        <a href="/getting-started/what-is-symbol.html" class="">Getting Started</a>
    </li>
    <li>
        <a href="/concepts/overview.html" class="active">Features</a>
    </li>
    <li>
        <a href="/guides/category.html" class="">Guides</a>
    </li>
    <li>
        <a href="/references/overview.html" class="">Tools</a>
    </li>
    <li>
        <a href="/contribute/community.html" class="">Help</a>
    </li>
</ul>
            </div>
            <div class="navbar-right col-xs-6 hidden-lg hidden-md">
                
                <div id="search-box">
    <input class="search search-mobile form-control" placeholder="Search"/>
</div>
                

            </div>
        </div>
        <div class="row">
            <div class="col-md-12 sidebar-xs visible-xs visible-sm">
                <div class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Navigation <b
                            class="caret"></b></a>
                    <ul class="dropdown-menu globaltoc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/index.html">Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="overview.html">Concepts</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="account.html">Account</a></li>
<li class="toctree-l2"><a class="reference internal" href="account-restriction.html">Account Restriction</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregate-transaction.html">Aggregate Transaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="block.html">Block</a></li>
<li class="toctree-l2"><a class="reference internal" href="consensus-algorithm.html">Consensus</a></li>
<li class="toctree-l2"><a class="reference internal" href="cross-chain-swaps.html">Cross-Chain Swaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="cryptography.html">Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-validation.html">Data Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="fees.html">Fees</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting.html">Harvesting</a></li>
<li class="toctree-l2"><a class="reference internal" href="inflation.html">Inflation</a></li>
<li class="toctree-l2"><a class="reference internal" href="metadata.html">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="mosaic.html">Mosaic</a></li>
<li class="toctree-l2"><a class="reference internal" href="mosaic-restriction.html">Mosaic Restriction</a></li>
<li class="toctree-l2"><a class="reference internal" href="multisig-account.html">Multisig Account</a></li>
<li class="toctree-l2"><a class="reference internal" href="namespace.html">Namespace</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin.html">Extending Symbol</a></li>
<li class="toctree-l2"><a class="reference internal" href="receipt.html">Receipt</a></li>
<li class="toctree-l2"><a class="reference internal" href="reward-programs.html">Reward Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="transaction.html">Transaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="transfer-transaction.html">Transfer Transaction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../references/index.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">Contributing</a></li>
</ul>
</ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        
        

<div class="col-md-3">
    <div id="sidebar" class="bs-sidenav" role="complementary">
        
        <div class="sidebar-md hidden-xs hidden-sm">
    <h4>Navigation</h4>
    <hr />
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/index.html">Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="overview.html">Concepts</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="account.html">Account</a></li>
<li class="toctree-l2"><a class="reference internal" href="account-restriction.html">Account Restriction</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregate-transaction.html">Aggregate Transaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="block.html">Block</a></li>
<li class="toctree-l2"><a class="reference internal" href="consensus-algorithm.html">Consensus</a></li>
<li class="toctree-l2"><a class="reference internal" href="cross-chain-swaps.html">Cross-Chain Swaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="cryptography.html">Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-validation.html">Data Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="fees.html">Fees</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting.html">Harvesting</a></li>
<li class="toctree-l2"><a class="reference internal" href="inflation.html">Inflation</a></li>
<li class="toctree-l2"><a class="reference internal" href="metadata.html">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="mosaic.html">Mosaic</a></li>
<li class="toctree-l2"><a class="reference internal" href="mosaic-restriction.html">Mosaic Restriction</a></li>
<li class="toctree-l2"><a class="reference internal" href="multisig-account.html">Multisig Account</a></li>
<li class="toctree-l2"><a class="reference internal" href="namespace.html">Namespace</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin.html">Extending Symbol</a></li>
<li class="toctree-l2"><a class="reference internal" href="receipt.html">Receipt</a></li>
<li class="toctree-l2"><a class="reference internal" href="reward-programs.html">Reward Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="transaction.html">Transaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="transfer-transaction.html">Transfer Transaction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../references/index.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">Contributing</a></li>
</ul>

</div>
        
    </div>
</div>


        
        <div class="col-md-7 content">
            
  <div class="section" id="node">
<h1>Node<a class="headerlink" href="#node" title="Permalink to this headline">¶</a></h1>
<p>Symbol blockchain platform is built from a <strong>network of nodes</strong>.
These nodes provide a powerful, stable, and secure platform where Smart Assets transactions are conducted, searched, and immutably logged on the blockchain ledger.</p>
<div class="figure align-center" id="id4">
<img alt="../_images/four-layer-architecture.png" src="../_images/four-layer-architecture.png" style="width: 550px;" />
<p class="caption"><span class="caption-text">Symbol’s Performance Advantage: A Four-Layered Architecture</span></p>
</div>
<p>The <strong>four-layered architecture</strong> allows developers to update any of these tiers without disrupting the others, which improves security.</p>
<div class="section" id="peer-node">
<span id="id1"></span><h2>Peer node<a class="headerlink" href="#peer-node" title="Permalink to this headline">¶</a></h2>
<p><strong>Repository:</strong> <a href="https://github.com/symbol/catapult-client" target="_blank">Catapult Client</a></p>
<div class="figure align-center" id="id5">
<img alt="../_images/peer-detail.png" src="../_images/peer-detail.png" style="width: 300px;" />
<p class="caption"><span class="caption-text">Peer node communication</span></p>
</div>
<p>The peer nodes form the backbone of the blockchain, making the network robust since it cannot be shut down by eliminating a single entity.
The role of the node is to <a class="reference internal" href="transaction.html#transaction-validation"><span class="std std-ref">verify transactions</span></a> and <a class="reference internal" href="block.html"><span class="doc">blocks</span></a>, run the consensus algorithm, create new blocks, and propagate the changes through the network.</p>
<p>The API nodes push new transactions to the P2P network, where they are <a class="reference internal" href="harvesting.html"><span class="doc">included in a block</span></a> or discarded.
After the block is processed, the node saves:</p>
<ul class="simple">
<li>The binary of each block as a flat-file on disk.</li>
<li>The updated chain state in memory or RocksDB (configurable).</li>
</ul>
<div class="section" id="rocksdb">
<h3>RocksDB<a class="headerlink" href="#rocksdb" title="Permalink to this headline">¶</a></h3>
<p>Peer nodes store the chain state in <a href=" https://en.wikipedia.org/wiki/RocksDB" target="_blank">RocksDB</a>.
The data structures cached are serialized and stored as values to corresponding keys.
For example, a column in this database maps the public keys to addresses.
Another one, the account state entries as the values to corresponding address keys.</p>
<p>Storing the state in memory is faster than using RocksDB.
However, storing state information in RocksDB demands less memory of the network nodes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Persisting the state in RocksDB is convenient in networks with a large number of accounts.</p>
</div>
</div>
<div class="section" id="node-reputation">
<h3>Node reputation<a class="headerlink" href="#node-reputation" title="Permalink to this headline">¶</a></h3>
<p>Public networks enable anyone to run a node.
Some of these nodes could share invalid information or try to disturb the network.</p>
<p>To reduce miscommunication attempts, the nodes keep track of the results of preceding communications.
Every node with P2P capabilities keeps a success and a failure counter for every other peer node that it has interacted with.</p>
<p>Nodes update the counters accordingly after processing the data requested.
If a node successfully connects to a remote peer, it first increments the success counter towards the remote peer.
If the communication attempt fails, the node increments the remote peer’s failure counter.
Likewise, the node updates the peer counters accordingly after processing data shared.</p>
<p>Extrapolating from these scores, the node assigns a weight between 500 and 10000 to every peer reached.</p>
<p>The probability of selecting a remote node to read data from depends linearly on its weight.
Every four rounds of node selections, the criteria changes to prevent <a href=" https://en.wikipedia.org/wiki/Sybil_attack" target="_blank">Sybil attacks</a>.</p>
</div>
</div>
<div class="section" id="api-node">
<span id="id2"></span><h2>API node<a class="headerlink" href="#api-node" title="Permalink to this headline">¶</a></h2>
<p><strong>Repository:</strong> <a href="https://github.com/symbol/catapult-client" target="_blank">Catapult Client</a></p>
<div class="figure align-center" id="id6">
<img alt="../_images/api-detail.png" src="../_images/api-detail.png" style="width: 500px;" />
<p class="caption"><span class="caption-text">Peer + API (Dual) node communication</span></p>
</div>
<p>The primary responsibility of an API node is to store the data in a readable form in MongoDB.
The catapult-client software allows configuring standalone API nodes or with Peer capabilities (Dual).</p>
<p>Instead of writing the data directly into MongoDB, the nodes write it into a file-based queue called <code class="docutils literal"><span class="pre">spool</span></code>.
A broker service consumes the data from the spool and updates MongoDB accordingly.
Once a block is processed, the broker service notifies the changes to catapult-rest instances using ZMQ.</p>
<p>API nodes are also responsible for collecting the cosignatures of <a class="reference internal" href="aggregate-transaction.html"><span class="doc">aggregated bonded transactions</span></a>, which are only processed once they are complete.</p>
<div class="section" id="mongodb">
<h3>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h3>
<p><a href="https://es.wikipedia.org/wiki/MongoDB" target="_blank">MongoDB</a> stores blocks, transactions, and chain states for high query performance.</p>
<p>The broker service updates the linked MongoDB instance when:</p>
<ul class="simple">
<li>A new block / a bunch of blocks finish processing.</li>
<li>New unconfirmed transactions complete processing.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">MongoDB should not be accessed externally.</p>
</div>
</div>
<div class="section" id="zmq">
<h3>ZMQ<a class="headerlink" href="#zmq" title="Permalink to this headline">¶</a></h3>
<p><a href=" https://en.wikipedia.org/wiki/ZeroMQ" target="_blank">ZeroMQ</a> is an asynchronous messaging library, which enables real-time subscriptions.
It transports notifications from the API node to the ZMQ endpoint, where Catapult REST listens.
It is an alternative to REST WebSockets, aimed to be used when performance is critical.</p>
</div>
</div>
<div class="section" id="rest-gateway">
<span id="id3"></span><h2>REST gateway<a class="headerlink" href="#rest-gateway" title="Permalink to this headline">¶</a></h2>
<p><strong>Repository:</strong> <a href="https://github.com/symbol/catapult-rest" target="_blank">Catapult REST</a></p>
<div class="figure align-center" id="id7">
<img alt="../_images/rest-detail.png" src="../_images/rest-detail.png" style="width: 500px;" />
<p class="caption"><span class="caption-text">REST gateway communication</span></p>
</div>
<p>The REST gateways handle <a class="reference internal" href="../api.html"><span class="doc">JSON API</span></a> client requests.
The gateway reads from MongoDB, formats the response, and returns it to the client.
This component is also responsible for returning events to the client using <a class="reference internal" href="../api.html#websockets"><span class="std std-ref">WebSockets</span></a>.</p>
<p>Each REST gateway connects to one API instance to send new transactions requests triggered from the client-side and receive updates in real-time using sockets.</p>
</div>
<div class="section" id="guides">
<h2>Guides<a class="headerlink" href="#guides" title="Permalink to this headline">¶</a></h2>
<ul class="postlist-style-circle postlist">
<li><p class="first"><a class="reference internal" href="../guides/network/creating-a-private-test-net.html">Creating private test networks</a></p>
<p>This guide will walk you through the process of setting up your own private network using Symbol.</p>
</li>
<li><p class="first"><a class="reference internal" href="../guides/network/running-a-symbol-node.html">Running a Symbol node</a></p>
<p>This guide walks you through the process of setting up a node to join Symbol’s <strong>public network</strong>.</p>
</li>
<li><p class="first"><a class="reference internal" href="../guides/network/configuring-network-properties.html">Configuring network properties</a></p>
<p>There is a large number of network-related settings that can be customized in Symbol.</p>
</li>
<li><p class="first"><a class="reference internal" href="../guides/network/configuring-node-properties.html">Configuring node properties</a></p>
<p>There is a large number of node-related settings that can be customized in Symbol.</p>
</li>
<li><p class="first"><a class="reference internal" href="../guides/network/connecting-to-mongodb.html">How to connect to MongoDB</a></p>
<p>Learn how to access your API node’s MongoDB instance.</p>
</li>
<li><p class="first"><a class="reference internal" href="../guides/network/using-symbol-bootstrap.html">Using Symbol Bootstrap</a></p>
<p>On Linux systems using <code class="docutils literal"><span class="pre">apt</span></code>:</p>
</li>
<li><p class="first"><a class="reference internal" href="../guides/network/running-a-symbol-node-manually.html">Running a Symbol node manually</a></p>
<p>This guide walks you through the process of setting up a node to join Symbol’s network <strong>without</strong> using Symbol Bootstrap.</p>
</li>
<li><p class="first"><a class="reference internal" href="../guides/network/running-a-secure-symbol-node.html">Running a Secure Symbol node</a></p>
<p>The <span class="xref std std-doc">running-a-symbol-node</span> guide explains how to easily <strong>create a node using Symbol Bootstrap</strong>. In that guide, the setup process is conducted on the same machine that will host the node, meaning that private keys are generated on a machine connected to the Internet. If you need a <strong>hardened level of security</strong> you can follow this guide instead, at the cost of a more involved setup process.</p>
</li>
<li><p class="first"><a class="reference internal" href="../guides/network/non-custodial-node-setup.html">Non-custodial node setup</a></p>
<p>How to <strong>relinquish control of a node’s main account to an external account</strong>, so that the external account’s private key is never required in the node setup process.</p>
</li>
<li><p class="first"><a class="reference internal" href="../guides/network/maintaining-a-symbol-node.html">Maintaining a Symbol Node</a></p>
<p>Once you have created a Symbol node, be it <span class="xref std std-doc">manually</span> or <span class="xref std std-doc">using Symbol bootstrap</span>, the node is <strong>mostly autonomous</strong>. But there is still a little bit of maintenance required, explained in this guide.</p>
</li>
</ul>
</div>
</div>

  <div class="section">
  
  
  </div>

            
            <p class="feedback">
                <hr/>
                Did you find what you were looking for?
                <a href="https://github.com/symbol/symbol-docs/issues/new/choose" target="_blank">Give us your feedback.</a>
            </p>
            
        </div>
         

<div class="col-md-2">
    <div class="bs-sidenav secondary" role="complementary">
    
    <div class="edit-github">
    <a href="https://github.com/symbol/symbol-docs/edit/main/source/concepts/node.rst" rel="nofollow"> <i class="fab fa-github"></i> Improve this page</a>
</div>
    <span class="title">On this page</span>
    <ul>
<li><a class="reference internal" href="#">Node</a><ul>
<li><a class="reference internal" href="#peer-node">Peer node</a><ul>
<li><a class="reference internal" href="#rocksdb">RocksDB</a></li>
<li><a class="reference internal" href="#node-reputation">Node reputation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api-node">API node</a><ul>
<li><a class="reference internal" href="#mongodb">MongoDB</a></li>
<li><a class="reference internal" href="#zmq">ZMQ</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rest-gateway">REST gateway</a></li>
<li><a class="reference internal" href="#guides">Guides</a></li>
</ul>
</li>
</ul>

    
    </div>
</div>

 
    </div>
</div>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
    docsearch({
        apiKey: 'fea87a364e2d51e3729a3a4889f7fe61',
        indexName: 'nemtech',
        inputSelector: '.search-desktop',
        debug: false
    });

    docsearch({
        apiKey: 'fea87a364e2d51e3729a3a4889f7fe61',
        indexName: 'nemtech',
        inputSelector: '.search-mobile',
        debug: false
    });
</script>

  </body>
</html>