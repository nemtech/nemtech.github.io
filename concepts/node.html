
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Node &#8212; NEM Developer Center</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/examplecode.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'Master',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/custom.js"></script>
    <script type="text/javascript" src="../_static/examplecode.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon-32x32.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="REST API" href="../api.html" />
    <link rel="prev" title="Receipt" href="receipt.html" />
  
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=5'>
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
<!--
<script type="text/javascript">
    var _paq = window._paq || [];
    _paq.push(['disableCookies']);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
        var u="//analytics.nemtech.io/piwik/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '1']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
</script>-->

  
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.postlist a {font-style: italic;}
    ul.postlist-style-disc {list-style-type: disc;}
    ul.postlist-style-none {list-style-type: none;}
    ul.postlist-style-circle {list-style-type: circle;}
  </style>

  </head>
  <body>

<div id="navbar"
     class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header col-md-3 col-sm-5">
            <a class="navbar-brand" href="../index.html">
                
                <span><img src="../_static/logo-nem.svg" alt="NEM logo"></span>
                
                developer center
            </a>
        </div>
        <div class="navbar-nav col-md-6 col-sm-7 hidden-xs">
            <div class="search-box">
    <input id="search" class="form-control" placeholder="Search for features, guides, or code examples"/>
    <i class="fas fa-search"></i>
</div>
        </div>
        <div class="navbar-right col-md-3">
            <ul>
                <ul class="list-inline">
    
    <li id="edit-github" class="hidden-xs hidden-sm">
        <a href="https://github.com/nemtech/nem2-docs/edit/master/source/concepts\node.rst"
           rel="nofollow"> <i class="fab fa-github"></i> Edit</a>
    </li>
    
    <li id="language" class="hidden-xs hidden-sm">
        <i class="fas fa-language"></i>
        <select>
            <option id="english" value="en">English</option>
            <option id="japanese" value="ja">日本語</option>
            <!--<option id="chinese" value="zh_CN">中文</option>-->
            <option id="translate" value="translate">Translate</option>
        </select>
    </li>
</ul>
            </ul>
        </div>
    </div>
</div>

<div
         class="container"
        >

    <div class="row">

        

        

<div class="col-md-3">
    <div id="sidebar" class="bs-sidenav" role="complementary">
        
        <div class="sidebar-md hidden-xs hidden-sm">
    <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/what-is-nem.html">What is NEM?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/setup-workstation.html">Setting up your workstation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/first-application.html">Writing your first application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/training.html">Self-paced training</a></li>
</ul>
<p class="caption"><span class="caption-text">Built-in Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="account.html">Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="mosaic.html">Mosaic</a></li>
<li class="toctree-l1"><a class="reference internal" href="namespace.html">Namespace</a></li>
<li class="toctree-l1"><a class="reference internal" href="transfer-transaction.html">Transfer Transaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="aggregate-transaction.html">Aggregate Transaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="account-restrictions.html">Account Restrictions</a></li>
<li class="toctree-l1"><a class="reference internal" href="multisig-account.html">Multisig Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="cross-chain-swaps.html">Cross-Chain Swaps</a></li>
</ul>
<p class="caption"><span class="caption-text">Protocol</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="cryptography.html">Cryptography</a></li>
<li class="toctree-l1"><a class="reference internal" href="block.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="transaction.html">Transaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="consensus-algorithm.html">Consensus Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="harvesting.html">Harvesting</a></li>
<li class="toctree-l1"><a class="reference internal" href="inflation.html">Inflation</a></li>
<li class="toctree-l1"><a class="reference internal" href="receipt.html">Receipt</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Node</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#p2p-component">P2P component</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#node-reputation">Node reputation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rocksdb">RocksDB</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api-component">API component</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mongodb">MongoDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zmq">ZMQ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rest-component">REST component</a></li>
<li class="toctree-l2"><a class="reference internal" href="#guides">Guides</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server.html">Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sdk.html">SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prototyping-tool.html">Prototyping Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extensions.html">Extensions</a></li>
</ul>
<p class="caption"><span class="caption-text">Contribute</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contribute/community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/contributing.html">Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/contributors.html">Contributors</a></li>
</ul>

    <p class="version">
        <small><b>Version:</b> <a href="https://github.com/nemtech/nem2-docs/releases">0.18.0</a></small>
    </p>
</div>

<div class="sidebar-xs visible-xs visible-sm">
    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Navigation <b class="caret"></b></a>
        <ul class="dropdown-menu globaltoc"><p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/what-is-nem.html">What is NEM?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/setup-workstation.html">Setting up your workstation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/first-application.html">Writing your first application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/training.html">Self-paced training</a></li>
</ul>
<p class="caption"><span class="caption-text">Built-in Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="account.html">Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="mosaic.html">Mosaic</a></li>
<li class="toctree-l1"><a class="reference internal" href="namespace.html">Namespace</a></li>
<li class="toctree-l1"><a class="reference internal" href="transfer-transaction.html">Transfer Transaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="aggregate-transaction.html">Aggregate Transaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="account-restrictions.html">Account Restrictions</a></li>
<li class="toctree-l1"><a class="reference internal" href="multisig-account.html">Multisig Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="cross-chain-swaps.html">Cross-Chain Swaps</a></li>
</ul>
<p class="caption"><span class="caption-text">Protocol</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="cryptography.html">Cryptography</a></li>
<li class="toctree-l1"><a class="reference internal" href="block.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="transaction.html">Transaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="consensus-algorithm.html">Consensus Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="harvesting.html">Harvesting</a></li>
<li class="toctree-l1"><a class="reference internal" href="inflation.html">Inflation</a></li>
<li class="toctree-l1"><a class="reference internal" href="receipt.html">Receipt</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Node</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#p2p-component">P2P component</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#node-reputation">Node reputation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rocksdb">RocksDB</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api-component">API component</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mongodb">MongoDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zmq">ZMQ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rest-component">REST component</a></li>
<li class="toctree-l2"><a class="reference internal" href="#guides">Guides</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server.html">Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sdk.html">SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prototyping-tool.html">Prototyping Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extensions.html">Extensions</a></li>
</ul>
<p class="caption"><span class="caption-text">Contribute</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contribute/community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/contributing.html">Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/contributors.html">Contributors</a></li>
</ul>
</ul>
    </li>
</div>
        
    </div>
</div>


        
        <div class="col-md-7 content">
            
  <div class="section" id="node">
<h1>Node<a class="headerlink" href="#node" title="Permalink to this headline">¶</a></h1>
<p>The NEM blockchain platform is built from a network of nodes. These nodes provide a powerful, stable, and secure platform where Smart Assets transactions are conducted, searched, and immutably logged to the blockchain ledger.</p>
<div class="figure align-center" id="id1">
<img alt="../_images/four-layer-architecture.png" src="../_images/four-layer-architecture.png" style="width: 650px;" />
<p class="caption"><span class="caption-text">Catapult’s Performance Advantage: A Four-Layered Architecture</span></p>
</div>
<p>The four-layered architecture allows developers to update any of these tiers without disrupting the others, which improves security.</p>
<div class="section" id="p2p-component">
<h2>P2P component<a class="headerlink" href="#p2p-component" title="Permalink to this headline">¶</a></h2>
<p><strong>Repository:</strong> <a href="https://github.com/nemtech/catapult-server" target="_blank">Catapult Server</a></p>
<p>The peer nodes form the backbone of the blockchain, making the network robust since it cannot be shut down by eliminating a single entity. The role of the node is to <a class="reference internal" href="transaction.html#transaction-validation"><span class="std std-ref">verify transactions</span></a> and <a class="reference internal" href="block.html"><span class="doc">blocks</span></a>, run the consensus algorithm, create new blocks, and propagate the changes through the network.</p>
<p>The API push new transactions to the P2P network, where they are <a class="reference internal" href="harvesting.html"><span class="doc">included in a block</span></a> or discarded. After the block is processed:</p>
<ul class="simple">
<li>The binary of the block is saved on disk as a flat file.</li>
<li>The updated chain state is saved in memory or RocksDB (configurable).</li>
</ul>
<div class="section" id="node-reputation">
<h3>Node reputation<a class="headerlink" href="#node-reputation" title="Permalink to this headline">¶</a></h3>
<p>Public networks enable anyone to run a node. Some of these nodes could share invalid information or try to disturb the network.</p>
<p>To reduce communication attempts, the nodes keep track of the results of preceding communications.</p>
<p>When a node connects to a remote peer, it first increments the trust towards the remote peer. Otherwise, the node increments the failure counter. Likewise, the node updates the trust counters accordingly after processing the data requested.</p>
<p>From these interactions, the node assigns a weight between 500 and 10000 to every peer reached.</p>
<p>The probability of selecting a remote node depends linearly on its weight. Every four rounds of node selections, the criteria changes to prevent <a href=" https://en.wikipedia.org/wiki/Sybil_attack" target="_blank">Sybil attacks</a>. The node selects a peer with high importance instead.</p>
</div>
<div class="section" id="rocksdb">
<h3>RocksDB<a class="headerlink" href="#rocksdb" title="Permalink to this headline">¶</a></h3>
<p><a href=" https://en.wikipedia.org/wiki/RocksDB" target="_blank">RocksDB</a> stores the chain state. The data structures cached are serialized and stored as value to a corresponding key. For example, a column maps the public keys to addresses. Another one, the account state entries as the value to corresponding address keys.</p>
<p>Storing the state in memory is usually faster than using RocksDB. However, storing state information in RocksDB demands less memory of the network nodes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Persisting the state is convenient in networks with a large number of accounts.</p>
</div>
</div>
</div>
<div class="section" id="api-component">
<h2>API component<a class="headerlink" href="#api-component" title="Permalink to this headline">¶</a></h2>
<p><strong>Repository:</strong> <a href="https://github.com/nemtech/catapult-server" target="_blank">Catapult Server</a></p>
<p>Peer nodes can be configured to have an API layer. The primary responsibility of an API node is to store the data in a readable form in MongoDB.</p>
<p>The API nodes <a class="reference internal" href="transaction.html#transaction-validation"><span class="std std-ref">validate transactions</span></a> received from the REST nodes. Additionally, the broker process that stores changes in MongoDB, forwards them to ZMQ.</p>
<p>API nodes are also responsible for collecting the cosignatures of <a class="reference internal" href="aggregate-transaction.html"><span class="doc">aggregated bonded transactions</span></a>, that are only processed once they are complete.</p>
<div class="section" id="mongodb">
<h3>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h3>
<p><a href="https://es.wikipedia.org/wiki/MongoDB" target="_blank">MongoDB</a> stores blocks, transactions and chain state for high query performance.</p>
<p>The API node updates the linked MongoDB instance when:</p>
<ul class="simple">
<li>A new block / a bunch of blocks finished processing.</li>
<li>New unconfirmed transactions completed processing.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">MongoDB should not be accessed externally.</p>
</div>
</div>
<div class="section" id="zmq">
<h3>ZMQ<a class="headerlink" href="#zmq" title="Permalink to this headline">¶</a></h3>
<p><a href=" https://en.wikipedia.org/wiki/ZeroMQ" target="_blank">ZeroMQ</a> is an asynchronous messaging library, which enables real-time subscriptions. It transports notifications from the API node to the ZMQ endpoint, where Catapult REST listens. It is an alternative to REST WebSockets, aimed to be used when performance is critical.</p>
</div>
</div>
<div class="section" id="rest-component">
<h2>REST component<a class="headerlink" href="#rest-component" title="Permalink to this headline">¶</a></h2>
<p><strong>Repository:</strong> <a href="https://github.com/nemtech/catapult-rest" target="_blank">Catapult REST</a></p>
<p>The REST node handles <strong>JSON API</strong> client requests. This reads from MongoDB, formats the response, and returns it to the client. This component is responsible as well to return events to the client using <a class="reference internal" href="../api.html#websockets"><span class="std std-ref">WebSockets</span></a>.</p>
<p>Each REST node connects to one API instance, sending new transactions using sockets.</p>
</div>
<div class="section" id="guides">
<h2>Guides<a class="headerlink" href="#guides" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a href="https://github.com/tech-bureau/catapult-service-bootstrap/" target="_blank"><b>Running Catapult locally</b></a></li>
</ul>
<p>Deploy a Catapult full node for learning and development purposes.</p>
<ul class="simple">
<li><strong>Deploying a test net node</strong> (<a class="reference internal" href="../guidelines/suggesting-changes.html"><span class="doc">upcoming</span></a>)</li>
<li><strong>Configuring a private network</strong> (<a class="reference internal" href="../guidelines/suggesting-changes.html"><span class="doc">upcoming</span></a>)</li>
<li><strong>Creating a custom plugin</strong> (<a class="reference internal" href="../guidelines/suggesting-changes.html"><span class="doc">upcoming</span></a>)</li>
</ul>
</div>
</div>

  <div class="section">
  
  
  </div>

            
            <p class="feedback top-gap">
                <b>Did you find what you were looking for?</b>
                <a href="https://github.com/nemtech/nem2-docs/issues/new/choose" target="_blank">Give us your feedback.</a>
            </p>
            
        </div>
         

<div class="col-md-2">
    <div class="bs-sidenav secondary" role="complementary">
        <ul>
<li><a class="reference internal" href="#">Node</a><ul>
<li><a class="reference internal" href="#p2p-component">P2P component</a><ul>
<li><a class="reference internal" href="#node-reputation">Node reputation</a></li>
<li><a class="reference internal" href="#rocksdb">RocksDB</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api-component">API component</a><ul>
<li><a class="reference internal" href="#mongodb">MongoDB</a></li>
<li><a class="reference internal" href="#zmq">ZMQ</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rest-component">REST component</a></li>
<li><a class="reference internal" href="#guides">Guides</a></li>
</ul>
</li>
</ul>

    </div>
</div>

 
    </div>
</div>

<footer class="footer">
    <div class="container">

        <div class="row">

            <div class="col-sm-4">
                <h4>Learn</h4>
                <ul>
                    <li>
                        <a href="../getting-started/what-is-nem.html">Getting Started</a>
                    </li>
                    <li>
                        <a href="account.html">Built-in Features</a>
                    </li>
                    <li>
                        <a href="cryptography.html">Protocol</a>
                    </li>
                    <li>
                        <a href="../api.html">References</a>
                    </li>
                    <li>
                        <a href="../contribute/contributing.html">Contribute</a>
                    </li>
                </ul>
            </div>

            <div class="col-sm-4">
                <h4>References</h4>
                <ul>
                    <li><a href="../api.html">REST API</a></li>
                    <li><a href="../server.html">Server</a></li>
                    <li><a href="../sdk.html">SDKs</a></li>
                    <li><a href="../cli.html">Client</a></li>
                    <li><a href="../extensions.html">Extensions</a></li>
                </ul>
            </div>


            <div class="col-sm-4">
                <h4>Community</h4>
                <ul>
                    <li>
                        <a href="http://slack.nemtech.io/">
                            <i class="fab fa-slack"></i> <span> Join #general discussion</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stackoverflow.com/tags/nem/">
                            <i class="fab fa-stack-overflow"></i>
                            <span> Ask development questions</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://twitter.com/nemtechdev">
                            <i class="fab fa-twitter"></i>
                            <span> Follow the dev updates</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/nemtech">
                            <i class="fab fa-github"></i>
                            <span> Explore our Github</span>
                        </a>
                    </li>
                </ul>
            </div>

        </div>

        <p class="text-center top-gap">
            
            
            &copy; Copyright 2018-2019, NEM.
            
            
            
        </p>
    </div>
</footer>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
    docsearch({
        apiKey: 'fea87a364e2d51e3729a3a4889f7fe61',
        indexName: 'nemtech',
        inputSelector: '#search',
        debug: false
    });
</script>

  </body>
</html>